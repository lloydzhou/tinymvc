<?php class contactController {	function initTable(){		ActiveRecord::execute("CREATE TABLE IF NOT EXISTS contact (				id INTEGER PRIMARY KEY, 				user_id INTEGER, 				email TEXT,				address TEXT			);");		redirect('/contact/index');	}	function index() {		$contact = new Contact();	    //$count = $contact->count();		$contact_list = $contact->findAll();		$count = count($contact_list);		render('contact/index', array('count' => $count, 'contact_list' => $contact_list), 'layout');	}	function create() {		if (!empty($_POST)) {			$contact = new Contact();			$contact->user_id = params('user_id');			$contact->address = params('address');			$contact->email = params('email');			if ($contact->insert())				redirect('/contact/index');		}		render('contact/create', null, 'layout');	}	function update() {		$contact = $this->_getContact();		if (!empty($_POST)) {			$contact->user_id = params('user_id');			$contact->address = params('address');			$contact->email = params('email');			if ($contact->update())				redirect('/contact/view/id/'. $contact->id);		}		render('contact/update', array('contact' => $contact), 'layout');	}	public function delete() {		$contact = $this->_getContact();		if ($contact->delete())			render('contact/delete', array('message' => "Delete Contact #{$contact->id} SUCCESS."));		else render('contact/delete', array('message' => "Fail to delete Contact #{$contact->id}."));	}	function view() {		$contact = $this->_getContact();		render('contact/view', array('contact' => $contact), 'layout');	}	protected function _getContact() {		if (!($id = params('id')))			error(404, 'Bad Request.');		if (!($contact = (new Contact)->find($id)))			error(404, 'Record not found.');		return $contact;	}}