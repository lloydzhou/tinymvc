<?php class contactController {	function initTable(){		ActiveRecord::execute("CREATE TABLE IF NOT EXISTS contact (				id INTEGER PRIMARY KEY, 				user_id INTEGER, 				email TEXT,				address TEXT			);");		redirect(createurl('/contact/index'));	}	function index() {		$contact = new Contact();		$contact_list = $contact->findAll();		$count = count($contact_list);		t('contact/index', array('count' => $count, 'contact_list' => $contact_list));	}	function create() {		if (!empty($_POST)) {			$contact = new Contact();			$contact->user_id = params('user_id');			$contact->address = params('address');			$contact->email = params('email');			if ($contact->insert())				redirect(createurl('/contact/index'));		}		t('contact/create');	}	function update() {		$contact = $this->_getContact();		if (!empty($_POST)) {			$contact->user_id = params('user_id');			$contact->address = params('address');			$contact->email = params('email');			if ($contact->update())				redirect(createurl('/contact/view/id/'. $contact->id));		}		t('contact/update', array('contact' => $contact));	}	public function delete() {		$contact = $this->_getContact();		if ($contact->delete())			t('contact/delete', array('message' => "Delete Contact #{$contact->id} SUCCESS."));		else t('contact/delete', array('message' => "Fail to delete Contact #{$contact->id}."));	}	function view() {		$contact = $this->_getContact();		t('contact/view', array('contact' => $contact));	}	protected function _getContact() {		if (!($id = params('id')))			error(404, 'Bad Request.');		$contact = new Contact;		if (!($contact->find($id)))			error(404, 'Record not found.');		return $contact;	}}